server.port=8765
eureka.client.service-url.defaultZone=http://${EUREKA_SERVER:localhost}:8761/eureka/

# 1. Enable Auto-Discovery Routing
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# 2. Correct StripPrefix Syntax
# Using 'parts' is the correct argument for the StripPrefix filter
spring.cloud.gateway.discovery.locator.filters[0].name=StripPrefix
spring.cloud.gateway.discovery.locator.filters[0].args.parts=1

# 3. Actuator Exposure
# No spaces around '*' and explicit exposure
management.endpoints.web.exposure.include=*
management.endpoint.gateway.enabled=true
management.endpoints.web.base-path=/actuator

# 4. Security Toggle (For Spring Boot 2.5.x)
# This ensures the gateway endpoints aren't restricted to 'read-only'
management.endpoint.gateway.access=unrestricted
