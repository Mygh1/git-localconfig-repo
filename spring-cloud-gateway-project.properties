server.port=8765
# If EUREKA_SERVER is provided by Docker, use it. Otherwise, use localhost.
eureka.client.service-url.defaultZone=http://${EUREKA_SERVER:localhost}:8761/eureka/
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# 2. THE FIX: Automatically strip the service name from the path for EVERY app
# This turns '/limits-service/limits' into just '/limits'
# Updated filter to avoid SpEL parsing errors
# Replace RewritePath with StripPrefix
# This removes the first part of the path (e.g., /limits-service) 
# and sends the rest to the microservice.
# 2. Fix the Filter Syntax (Try without indices first for simplicity)
spring.cloud.gateway.discovery.locator.filters[0].name=StripPrefix
spring.cloud.gateway.discovery.locator.filters[0].args.parts=1

# 3. Actuator Exposure (Ensure NO spaces after the asterisk)
management.endpoints.web.exposure.include=*
management.endpoint.gateway.enabled=true
management.endpoints.web.base-path=/actuator
